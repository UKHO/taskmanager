trigger:
- master

pool: NautilusBuild

steps:
- task: UseDotNet@2
  inputs:
    packageType: 'sdk'
    version: '3.1.x'
- task: DotNetCoreCLI@2
  inputs:
    command: 'restore'
    projects: '$(Build.SourcesDirectory)\src\portal\portal\portal.csproj'
    feedsToUse: 'select'
- task: synopsys-coverity@1
  inputs:
    coverityService: 'coverity.mgmt.local'
    projectName: 'TaskManager'
    streamName: 'TaskManager-master'
    coverityBuildDirectory: '$(Build.SourcesDirectory)'
    buildCommand: 'dotnet build $(Build.SourcesDirectory)\src\portal\portal\portal.csproj'
    customCommandArgs: true
    covAnalyzeArgs: '--strip-path $(Build.Repository.LocalPath) --webapp-security --all'
